<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Find a Tutor | Tutora</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { font-family: Arial, sans-serif; background-color: #f5f5f5; }
.navbar { margin-bottom: 20px; }
.container { max-width: 1200px; margin: auto; padding: 20px; }
.card { border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 20px; }
.card-body { text-align: center; }
.card-title { font-weight: bold; font-size: 1.2rem; }
.card-text { color: #555; }
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
<div class="container">
  <a class="navbar-brand fw-bold" href="index.html">TUTORA</a>
  <div class="collapse navbar-collapse show">
    <ul class="navbar-nav ms-auto">
      <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
      <li class="nav-item"><a class="nav-link active" href="find-tutor.html">Find a Tutor</a></li>
      <li class="nav-item"><a class="nav-link" href="register-tutor.html">Become a Tutor</a></li>
    </ul>
  </div>
</div>
</nav>

<!-- Filters -->
<div class="container mb-4">
<div class="row g-3">
  <div class="col-md-3">
    <select id="subjectFilter" class="form-select">
      <option value="All">All Subjects</option>
    </select>
  </div>
  <div class="col-md-2">
    <select id="classFilter" class="form-select">
      <option value="All">All Classes</option>
    </select>
  </div>
  <div class="col-md-3">
    <select id="countryFilter" class="form-select">
      <option value="All">All Countries</option>
    </select>
  </div>
  <div class="col-md-2">
    <select id="stateFilter" class="form-select">
      <option value="All">All States</option>
    </select>
  </div>
  <div class="col-md-2">
    <select id="districtFilter" class="form-select">
      <option value="All">All Districts</option>
    </select>
  </div>
</div>
</div>

<!-- Tutors Section -->
<div class="container" id="tutorsContainer"></div>

<footer class="bg-white border-top py-3 text-center text-muted mt-4">
Â© 2026 TUTORA. All rights reserved.
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script>
// ---------------- CBSE-style Subjects & Classes ----------------
const subjects = ["All","English","Hindi","Sanskrit","French","German","Spanish","Mathematics","Physics","Chemistry","Biology","Computer Science","Biotechnology","Accountancy","Business Studies","Economics","Informatics Practices","Entrepreneurship","History","Political Science","Geography","Psychology","Sociology","Information Technology","Physical Education","Art & Craft","Music","Dance"];
const classes = ["All","1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th"];

const subjectFilter = document.getElementById("subjectFilter");
const classFilter = document.getElementById("classFilter");
const countryFilter = document.getElementById("countryFilter");
const stateFilter = document.getElementById("stateFilter");
const districtFilter = document.getElementById("districtFilter");

subjects.forEach(s => subjectFilter.innerHTML += `<option value="${s}">${s}</option>`);
classes.forEach(c => classFilter.innerHTML += `<option value="${c}">${c}</option>`);

// -------- Google Sheet CSV URL --------
const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQQQHhT5VeUKqGGRrhlW5Y8cVgHXeJ9XEMm3HBh8Zcy5xQv2DdddIL3FR5ysRsdJGmx9ooW7WcQsIYB/pub?output=csv";
let allTutors = [];

// Fetch CSV
Papa.parse(csvUrl, {
    download: true,
    header: true,
    complete: function(results) {
        allTutors = results.data;
        populateLocationFilters();
        renderTutors(allTutors);
    }
});

// Populate location dropdowns dynamically
function populateLocationFilters() {
  const countries = new Set();
  const states = new Set();
  const districts = new Set();
  allTutors.forEach(t => {
    if(t.Country) countries.add(t.Country.trim());
    if(t.State) states.add(t.State.trim());
    if(t.District) districts.add(t.District.trim());
  });
  Array.from(countries).sort().forEach(c => countryFilter.innerHTML += `<option value="${c}">${c}</option>`);
  Array.from(states).sort().forEach(s => stateFilter.innerHTML += `<option value="${s}">${s}</option>`);
  Array.from(districts).sort().forEach(d => districtFilter.innerHTML += `<option value="${d}">${d}</option>`);
}

// Render tutors
function renderTutors(list) {
  const container = document.getElementById("tutorsContainer");
  container.innerHTML = "";
  list.forEach(t => {
    container.innerHTML += `
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">${t.Name}</h5>
        <p class="card-text"><strong>Subjects:</strong> ${t.Subjects}</p>
        <p class="card-text"><strong>Classes:</strong> ${t.Classes}</p>
        <p class="card-text"><strong>Location:</strong> ${t.Country}, ${t.State}, ${t.District}</p>
        <p class="card-text"><strong>Home Tuition:</strong> ${t.HomeTuition}</p>
        <p class="card-text"><strong>Timings:</strong> ${t.Timings}</p>
        <a href="mailto:${t.Email}" class="btn btn-primary">Contact</a>
      </div>
    </div>`;
  });
}

// Filters logic
[subjectFilter, classFilter, countryFilter, stateFilter, districtFilter].forEach(f => {
  f.addEventListener("change", () => {
    const filtered = allTutors.filter(t => {
      let match = true;
      if(subjectFilter.value !== "All" && !t.Subjects.includes(subjectFilter.value)) match=false;
      if(classFilter.value !== "All" && !t.Classes.includes(classFilter.value)) match=false;
      if(countryFilter.value !== "All" && t.Country !== countryFilter.value) match=false;
      if(stateFilter.value !== "All" && t.State !== stateFilter.value) match=false;
      if(districtFilter.value !== "All" && t.District !== districtFilter.value) match=false;
      return match;
    });
    renderTutors(filtered);
  });
});
</script>
</body>
</html>

    
